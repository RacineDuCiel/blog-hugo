{{/*
===========================================================================
Shortcode: Cover Image
---------------------------------------------------------------------------
Usage: {{< cover "image.jpg" "Alt text optional">}}

    BEST PRACTICE: Styles externalisés dans assets/sass/shortcodes.scss
    - Séparation structure (HTML) / présentation (CSS)
    ===========================================================================
    */}}
    {{ $src := .Get 0 }}
    {{ $alt := .Get 1 | default $src }}
    {{ $image := .Page.Resources.GetMatch $src }}

    <div class="cover-container">
        {{ if $image }}
        {{/* Image Processing: génère 1x et 2x pour les écrans Retina */}}
        {{ $thumb1x := $image.Fill "300x300 Center webp q90" }}
        {{ $thumb2x := $image.Fill "600x600 Center webp q90" }}

        <img class="cover-img" srcset="{{ $thumb1x.RelPermalink }} 1x, {{ $thumb2x.RelPermalink }} 2x"
            src="{{ $thumb1x.RelPermalink }}" alt="{{ $alt }}" width="{{ $thumb1x.Width }}"
            height="{{ $thumb1x.Height }}" loading="lazy">
        {{ else }}
        {{/* Fallback si l'image n'est pas trouvée */}}
        <p class="shortcode-error">Image introuvable : {{ $src }}</p>
        {{ end }}
    </div>